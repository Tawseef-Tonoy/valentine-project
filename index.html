<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Be My Valentine ğŸ’˜</title>
<style>
/* ğŸŒ¸ Body & background */
body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
    background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 50%, #fad0c4 100%);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: url('https://i.imgur.com/Q9rY0hQ.png'), auto; /* heart cursor */
}

/* ğŸŒ¸ Main card */
.card {
    background: rgba(255,255,255,0.1);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
    width: 350px;
    backdrop-filter: blur(10px);
    position: relative;
}

/* ğŸŒ¸ Headings */
h2 {
    font-size: 20px;
    margin-bottom: 5px;
    color: #fff;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
}
#fromText {
    margin-top: 0;
    font-size: 14px;
    color: #ffe6f2;
}

/* ğŸŒ¸ Buttons */
button {
    padding: 10px 20px;
    border-radius: 12px;
    border: none;
    font-size: 16px;
    margin: 10px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* ğŸŒ¸ Yes button */
#yes {
    background: #ff6eb4;
    color: white;
    box-shadow: 0 5px 15px rgba(255,110,180,0.5);
}
#yes:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(255,110,180,0.8);
}

/* ğŸŒ¸ No button */
#no {
    background: #f44336;
    color: white;
    position: absolute;
    box-shadow: 0 5px 15px rgba(244,67,54,0.5);
}

/* ğŸŒ¸ Counters and messages */
#counter, #yesCount {
    font-size: 13px;
    color: #fff;
    opacity: 0.9;
    margin-top: 5px;
}
#message {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    color: #fff;
}

/* ğŸŒ¸ Floating hearts */
.heart {
    position: absolute;
    color: #ff5ca2;
    font-size: 20px;
    animation: float 4s linear infinite;
}
@keyframes float {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-100vh); opacity: 0; }
}

/* ğŸŒ¸ Emoji pop */
.emoji {
    position: absolute;
    font-size: 24px;
    animation: pop 1s ease-out forwards;
}
@keyframes pop {
    from { transform: scale(1); opacity: 1; }
    to { transform: scale(2); opacity: 0; }
}

/* ğŸŒ¸ Confetti */
.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #ff69b4;
    animation: confetti-fall 2s linear forwards;
}
@keyframes confetti-fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(400px) rotate(720deg); opacity: 0; }
}
</style>
</head>

<body>
<div class="card" id="setup">
    <h2>Create your Valentine link ğŸ’˜</h2>
    <input id="fromInput" placeholder="Your name" />
    <input id="toInput" placeholder="Partner's name" />
    <button onclick="generateLink()">Generate Link ğŸ”—</button>
    <p id="linkBox"></p>
</div>

<div class="card" id="game" style="display:none;">
    <h2 id="question"></h2>
    <p id="fromText"></p>

    <button id="yes">Yes ğŸ’–</button>
    <button id="no">No ğŸ˜</button>

    <div id="counter">No escaped: 0 ğŸ˜†</div>
    <div id="yesCount"></div>
    <div id="message"></div>
</div>

<audio id="yesSound">
    <source src="https://www.soundjay.com/human/sounds/applause-01.mp3">
</audio>

<script>
const params = new URLSearchParams(window.location.search);
const fromName = params.get("from");
const toName = params.get("to");

const setup = document.getElementById("setup");
const game = document.getElementById("game");

const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");
const question = document.getElementById("question");
const fromText = document.getElementById("fromText");
const counter = document.getElementById("counter");
const message = document.getElementById("message");
const yesCountBox = document.getElementById("yesCount");
const sound = document.getElementById("yesSound");

let escapes = 0;
let noScale = 1;
let yesScale = 1;

// Show game if link opened with params
if (fromName && toName) {
    setup.style.display = "none";
    game.style.display = "block";

    question.innerHTML = `ğŸ’˜ ${toName}, will you be my Valentine? ğŸ’˜`;
    fromText.innerHTML = `â€” from <b>${fromName}</b>`;
}

// Generate share link
function generateLink() {
    const from = encodeURIComponent(document.getElementById("fromInput").value);
    const to = encodeURIComponent(document.getElementById("toInput").value);
    const link = `${window.location.origin}${window.location.pathname}?from=${from}&to=${to}`;
    document.getElementById("linkBox").innerHTML = `<a href="${link}" target="_blank">${link}</a>`;
}

// Floating hearts
setInterval(() => {
    const h = document.createElement("div");
    h.className = "heart";
    h.innerHTML = "â¤ï¸";
    h.style.left = Math.random() * 100 + "vw";
    h.style.bottom = "0";
    h.style.fontSize = 16 + Math.random() * 20 + "px";
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 4000);
}, 600);

// Escape logic for No button
function escapeNo() {
    escapes++;
    counter.innerText = `No escaped: ${escapes} ğŸ˜†`;

    noScale = Math.max(noScale - 0.1, 0.2);
    yesScale += 0.1;

    noBtn.style.transform = `scale(${noScale})`;
    yesBtn.style.transform = `scale(${yesScale})`;

    noBtn.style.left = Math.random() * 200 + "px";
    noBtn.style.top = Math.random() * 150 + "px";

    const e = document.createElement("div");
    e.className = "emoji";
    e.innerHTML = "ğŸ˜‚";
    e.style.left = Math.random() * 80 + "%";
    e.style.top = Math.random() * 80 + "%";
    document.body.appendChild(e);
    setTimeout(() => e.remove(), 1000);

    // After 6 tries, No disappears
    if (escapes >= 6) {
        noBtn.style.display = "none";
        counter.innerText = "No option removed ğŸ˜ˆ";
    }
}

noBtn.addEventListener("mouseover", escapeNo);
noBtn.addEventListener("touchstart", escapeNo);

// Confetti explosion on YES
function confetti() {
    for (let i = 0; i < 50; i++) {
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = Math.random() * window.innerWidth + "px";
        c.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 70%)`;
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 2000);
    }
}

// YES click
yesBtn.addEventListener("click", () => {
    sound.play();
    confetti();

    let yesCount = localStorage.getItem("yesCount") || 0;
    yesCount++;
    localStorage.setItem("yesCount", yesCount);

    yesBtn.style.display = "none";
    noBtn.style.display = "none";
    counter.style.display = "none";

    message.innerHTML = `ğŸ’– ${toName} said YES! ğŸ’–<br>${fromName} wins Valentine ğŸ˜`;
    yesCountBox.innerText = `Total YES clicks on this device: ${yesCount}`;
});
</script>
</body>
</html>
